<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Seguimiento de Pedido - La Casa del Pastel</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Libre+Barcode+128&family=Courier+Prime&family=Playfair+Display:wght@700&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
  
  <style>
    :root{
      --red-700:#a30015;
      --red-500:#d6001c;
      --bg-card: #fff;
      --muted: #666;
      --radius: 12px;
      --maxwidth:1100px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: "Open Sans", sans-serif;
      background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)),
        url('https://cdn.pixabay.com/photo/2023/09/04/20/39/cake-8233676_1280.jpg') no-repeat center center/cover;
      background-attachment: fixed;
      color:#111;
    }

     footer.legal-footer {
      background-color: rgba(0, 0, 0, 0.8);
      color: #ccc;
      padding: 25px;
      text-align: center;
      font-size: 0.8em;
      font-family: 'Open Sans', sans-serif;
      z-index: 2;
      width: 100%;
    }

    footer.legal-footer a {
      color: #f4a261;
      text-decoration: none;
      margin: 0 10px;
    }

    footer.legal-footer a:hover {
      text-decoration: underline;
    }

    footer.legal-footer p {
      margin: 0;
      padding: 5px 0;
    }

    footer.legal-footer .credits {
      margin-top: 10px;
      opacity: 0.7;
    }

    header{
      display:flex; justify-content:space-between; align-items:center;
      padding:18px 28px; background: rgba(0,0,0,0.8); backdrop-filter: blur(5px);
      color:white; position:sticky; top:0; z-index:10;
    }
    .brand{display:flex; align-items:center; gap:12px; font-family: 'Playfair Display', serif; font-size: 1.2rem;}
    .brand img{height:44px; border-radius:8px}
    nav a{color:white; text-decoration:none; margin-left:14px; opacity:0.9}
    nav a:hover{opacity:1; text-decoration: underline;}

    .container{max-width: var(--maxwidth); margin:28px auto; padding:18px;}

    .card{
      background: var(--bg-card); border-radius: var(--radius); padding:25px;
      box-shadow: 0 12px 30px rgba(0,0,0,0.2);
    }

    h1, h2, h3 { color:var(--red-700); margin:0 0 10px; font-family: 'Playfair Display', serif}

    /* Layout Principal */
    .layout{ display:grid; grid-template-columns: 1fr 380px; gap:20px; margin-top:20px; }
    @media (max-width:980px){ .layout{grid-template-columns:1fr} }

    /* Estilos Pedido */
    .order-meta{display:flex; justify-content:space-between; gap:12px; align-items:center; margin-bottom:15px; border-bottom:1px solid #eee; padding-bottom:15px;}
    .order-number{font-weight:800; font-size:1.2rem; color:var(--red-700)}
    .order-status{padding:6px 12px; border-radius:20px; background: #e8f5e9; color:#2e7d32; font-weight:800; border:1px solid #c8e6c9;}

    .item{ display:flex; gap:15px; align-items:center; padding:12px; border-radius:10px; background:#f9f9f9; border:1px solid #eee; margin-bottom:10px;}
    .item img{width:80px; height:80px; object-fit:cover; border-radius:8px;}
    .item .info{flex:1}
    .item .title{font-weight:700; color:#333; margin-bottom:4px;}
    .item .meta{color:var(--muted); font-size:0.9rem}

    .totals{margin-top:20px; text-align:right; font-weight:800; font-size:1.4rem; color:var(--red-700)}

    /* Botones */
    .btn{padding:10px 16px; border-radius:8px; border:0; cursor:pointer; font-weight:700; text-decoration:none; display:inline-flex; align-items:center; justify-content:center; gap:8px; transition: transform 0.2s;}
    .btn:hover{transform: translateY(-2px);}
    .btn-primary{background:linear-gradient(90deg,var(--red-500),var(--red-700)); color:white}
    .btn-ghost{background:transparent; border:2px solid #ddd; color:#555}
    .btn-outline-red{background:white; border:2px solid var(--red-700); color:var(--red-700)}

    /* Timeline */
    .timeline{display:flex; flex-direction:column; gap:0; padding:10px 0;}
    .step{display:flex; gap:15px; padding-bottom:20px; position:relative;}
    .step:last-child{padding-bottom:0;}
    .step::before{
        content:''; position:absolute; left:7px; top:20px; bottom:0; width:2px; background:#eee;
    }
    .step:last-child::before{display:none;}
    
    .step .bullet{
      width:16px; height:16px; border-radius:50%; background:#eee; z-index:2; flex-shrink:0; margin-top:4px;
      border:3px solid #fff; box-shadow: 0 0 0 1px #ddd;
    }
    .step.done .bullet{background:var(--red-500); box-shadow:0 0 0 3px rgba(214,0,28,0.2); border-color:white;}
    .step .when{font-size:0.8rem; color:var(--muted); margin-top:2px;}

    /* MICROPAGOS */
    .micropayment-card {
        background: linear-gradient(135deg, #fff3cd, #fff8e1);
        border: 1px solid #ffeeba; border-radius: var(--radius); padding: 20px; margin-top: 20px;
    }
    .micro-header { display:flex; align-items:center; gap:10px; margin-bottom:10px; color:#856404; font-weight:bold; font-size:1.1rem;}
    .micro-body { font-size:0.9rem; color:#666; margin-bottom:15px; line-height:1.4;}
    .donation-options { display:grid; grid-template-columns: 1fr 1fr 1fr; gap:8px; }
    .btn-donate {
        background: white; border:1px solid #e0a800; color:#856404; padding:8px; 
        border-radius:6px; cursor:pointer; font-weight:bold; transition:all 0.2s;
    }
    .btn-donate:hover { background: #e0a800; color:white; }

    /* FACTURA & MODALES */
    .invoice-overlay {
        position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85);
        z-index:2000; display:none; justify-content:center; align-items:start; overflow-y:auto; padding:40px 20px;
        backdrop-filter: blur(4px);
    }
    
    /* MODAL DE MENSAJE */
    .msg-modal-box {
        background: white; padding: 30px; border-radius: 15px; text-align: center; width: 90%; max-width: 400px;
        box-shadow: 0 20px 50px rgba(0,0,0,0.5); align-self: center;
        animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    /* MODAL DE FACTURA */
    .invoice-paper {
        background:white; width:100%; max-width:850px; min-height:1000px; padding:40px;
        box-shadow: 0 0 50px rgba(0,0,0,0.5); font-family: Arial, sans-serif; font-size:12px; color:#333;
        position:relative;
        overflow: hidden; /* Para que la marca de agua no se salga */
    }
    
    /* --- NUEVO ESTILO: MARCA DE AGUA --- */
    .watermark-overlay {
        position: absolute;
        top: 50%; left: 50%;
        transform: translate(-50%, -50%) rotate(-45deg);
        font-size: 6rem;
        font-weight: 800;
        color: rgba(163, 0, 21, 0.08); /* Rojo muy transparente */
        border: 8px solid rgba(163, 0, 21, 0.08);
        padding: 20px 40px;
        border-radius: 20px;
        pointer-events: none; /* Permite hacer clic a trav√©s de ella */
        white-space: nowrap;
        z-index: 0;
        font-family: 'Arial', sans-serif;
        text-transform: uppercase;
        user-select: none;
    }

    @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    
    /* Estructura CFDI */
    .cfdi-header { display:flex; justify-content:space-between; margin-bottom:30px; position:relative; z-index:1;}
    .cfdi-logo { width:120px; margin-bottom:10px; object-fit: contain; }
    .cfdi-title { font-weight:bold; font-size:1.4rem; color:#555; text-align:right; margin-bottom:5px;}
    .cfdi-label { font-weight:bold; color:#444; }
    .cfdi-row { margin-bottom:4px; }
    .cfdi-info-grid { display:grid; grid-template-columns: 1fr 1fr; gap:30px; margin-bottom:30px; position:relative; z-index:1;}
    .cfdi-box { border:1px solid #ddd; padding:15px; border-radius:4px; background: rgba(255,255,255,0.8); }
    .cfdi-box h4 { margin:0 0 10px 0; border-bottom:1px solid #eee; padding-bottom:5px; color:var(--red-700); font-size:13px; }
    .cfdi-table { width:100%; border-collapse:collapse; margin-bottom:30px; position:relative; z-index:1;}
    .cfdi-table th { background:#eee; border:1px solid #ccc; padding:8px; text-align:left; font-size:11px; font-weight:bold;}
    .cfdi-table td { border:1px solid #ccc; padding:8px; font-size:11px; vertical-align:top; background: rgba(255,255,255,0.8);}
    .text-right { text-align:right; }
    .cfdi-footer-grid { display:grid; grid-template-columns: 2fr 1fr; gap:30px; position:relative; z-index:1;}
    .cfdi-seals { font-family: 'Courier Prime', monospace; font-size:9px; word-break:break-all; color:#555; }
    .seal-block { margin-bottom:10px; }
    .seal-label { font-weight:bold; margin-bottom:2px; display:block; color:#000;}
    .qr-box { width:120px; height:120px; border:1px solid #000; padding:5px; margin-top:10px; background:white;}
    .qr-img { width:100%; height:100%; object-fit:contain; }

    /* CERTIFICACI√ìN */
    .cert-badge {
        margin-top:20px; padding:10px; border:1px dashed #2e7d32; background:#e8f5e9;
        color:#1b5e20; text-align:center; font-size:0.85rem; border-radius:4px; display:flex; align-items:center; justify-content:center; gap:8px;
    }
    .footer-cert {
        text-align:center; color:white; margin-top:40px; padding-bottom:20px; font-size:0.85rem; opacity:0.8;
    }

  </style>
</head>
<body>

  <header>
    <div class="brand">
      <img src="CasaPastel.png" alt="Logo" onerror="this.onerror=null;this.src='https://placehold.co/40x40/F8D7DA/A30015?text=LCP'">
      <div style="font-weight:800">La Casa del Pastel</div>
    </div>
    <nav>
      <a href="menu.html">Men√∫</a>
      <a href="carritoCompra.html">Carrito</a>
      <a href="index.html">Inicio</a>
    </nav>
  </header>

  <div class="container">
    <div class="card">
      <h1>Seguimiento de tu pedido</h1>
      
      <div style="margin-top:15px; display:flex; gap:12px; align-items:center; flex-wrap:wrap; border-bottom:1px solid #eee; padding-bottom:20px; margin-bottom:20px;">
        <input type="text" value="923153" style="padding:10px; border-radius:8px; border:1px solid #ccc; width:220px; background:#f5f5f5;" readonly>
        <span style="color:#2e7d32; font-weight:bold; font-size:0.9rem;">‚úì Pedido Encontrado</span>
      </div>

      <div class="layout">
        
        <section>
          <div class="order-meta">
            <div>
              <div class="order-number">Pedido #923153</div>
              <div class="muted" style="font-size:0.9rem">4/11/2025, 10:05 p.m.</div>
            </div>
            <div class="order-status">En Camino</div>
          </div>

          <div style="display:flex; flex-direction:column; gap:10px;">
            <div class="item">
              <img src="https://cdn.pixabay.com/photo/2019/07/26/20/30/jelly-4365579_1280.jpg" alt="Producto">
              <div class="info">
                <div class="title">Gelatina de frutas Artesanal</div>
                <div class="meta">Cantidad: 2 ‚Ä¢ Precio Unit: $11.99</div>
              </div>
              <div style="font-weight:800">$23.98</div>
            </div>
          </div>

          <div class="totals">
            Total Pagado: $23.98
          </div>

          <div style="margin-top:30px; display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
             <span style="font-size:0.9rem; font-weight:600; color:#555;">Acciones:</span>
             <button class="btn btn-outline-red" onclick="openInvoice()">üìÑ Solicitar / Ver Factura</button>
             <button class="btn btn-ghost" onclick="showNotification('¬°Gracias por contactarnos!', 'Nuestro equipo de soporte te llamar√° en breve.')">üìû Ayuda</button>
          </div>
          
          <div class="cert-badge">
             üîí <strong>Certificaci√≥n Digital 2025:</strong> Transacci√≥n aut√©ntica y protegida por firma electr√≥nica PKI.
          </div>
        </section>

        <aside>
          <div style="background:#fff; padding:15px; border-radius:10px; border:1px solid #eee;">
            <h3 style="font-size:1.1rem; border-bottom:1px solid #eee; padding-bottom:10px;">Estado del env√≠o</h3>
            <div class="timeline">
              <div class="step done">
                <div class="bullet"></div>
                <div class="content">
                  <div style="font-weight:700">Recibido</div>
                  <div class="when">10:05 p.m.</div>
                </div>
              </div>
              <div class="step done">
                <div class="bullet"></div>
                <div class="content">
                  <div style="font-weight:700">Preparaci√≥n</div>
                  <div class="when">10:15 p.m.</div>
                </div>
              </div>
              <div class="step done">
                <div class="bullet"></div>
                <div class="content">
                  <div style="font-weight:700">En camino</div>
                  <div class="when">Ahora</div>
                </div>
              </div>
              <div class="step">
                <div class="bullet"></div>
                <div class="content">
                  <div style="font-weight:700; color:#999;">Entregado</div>
                  <div class="when">Est: 10:45 p.m.</div>
                </div>
              </div>
            </div>
          </div>

          <div class="micropayment-card">
            <div class="micro-header">
               <span>‚ù§Ô∏è</span> Donaci√≥n con Causa
            </div>
            <div class="micro-body">
               ¬øTe sobr√≥ un poco de cambio? Apoya a <strong>"Ni√±os del Futuro A.C."</strong> para combatir la pobreza infantil.
               <br><br>
               <em>¬°Al donar desbloqueas cupones exclusivos para tu pr√≥xima compra!</em>
            </div>
            <div class="donation-options">
               <button class="btn-donate" onclick="showDonateSuccess(10)">$10</button>
               <button class="btn-donate" onclick="showDonateSuccess(20)">$20</button>
               <button class="btn-donate" onclick="showDonateSuccess(50)">$50</button>
            </div>
          </div>

        </aside>
      </div>
    </div>
  </div>

  <div class="footer-cert">
    La Casa del Pastel &copy; 2025 | Sitio Protegido por SSL y Firma Digital Avanzada (Simulada)
  </div>

  <div id="notificationModal" class="invoice-overlay">
      <div class="msg-modal-box">
          <div style="font-size:3rem; margin-bottom:15px;" id="notifIcon">üéâ</div>
          <h3 style="font-family:'Playfair Display',serif; color:#a30015; margin-bottom:10px;" id="notifTitle">¬°Gracias!</h3>
          <p style="color:#666; font-size:1rem; margin-bottom:20px; line-height:1.5;" id="notifMsg">
              Tu donaci√≥n ha sido procesada correctamente.
          </p>
          <button class="btn btn-primary" onclick="closeNotification()">Aceptar</button>
      </div>
  </div>

  <div id="invoiceModal" class="invoice-overlay">
     <div class="invoice-paper">
        
        <div class="watermark-overlay">SIN VALIDEZ OFICIAL</div>

        <div class="cfdi-header">
           <div>
              <img src="CasaPastel.png" alt="Logo" class="cfdi-logo" onerror="this.onerror=null;this.src='https://placehold.co/100x50?text=LOGO'">
              <div style="font-weight:bold; font-size:1.2rem;">LA CASA DEL PASTEL S.A. DE C.V.</div>
              <div class="cfdi-row">Av. Tecnol√≥gico #123, Aguascalientes</div>
              <div class="cfdi-row">RFC: <span style="font-family:'Courier Prime'">LCP230101XYZ</span></div>
              <div class="cfdi-row">R√©gimen Fiscal: 601 - General de Ley Personas Morales</div>
           </div>
           <div class="text-right">
              <div class="cfdi-title">FACTURA ELECTR√ìNICA</div>
              <div class="cfdi-row"><span class="cfdi-label">Folio Fiscal:</span> A1B2C3D4-E5F6-7890-ABCD-1234567890EF</div>
              <div class="cfdi-row"><span class="cfdi-label">No. de Serie del CSD:</span> 00001000000509876543</div>
              <div class="cfdi-row"><span class="cfdi-label">Fecha y hora de emisi√≥n:</span> 2025-11-04T22:10:00</div>
              <div class="cfdi-row"><span class="cfdi-label">Tipo de Comprobante:</span> I - Ingreso</div>
           </div>
        </div>

        <div class="cfdi-info-grid">
           <div class="cfdi-box">
              <h4>DATOS DEL CLIENTE</h4>
              <div class="cfdi-row"><span class="cfdi-label">Nombre:</span> JUAN P√âREZ</div>
              <div class="cfdi-row"><span class="cfdi-label">RFC:</span> XAXX010101000 (Gen√©rico)</div>
              <div class="cfdi-row"><span class="cfdi-label">Uso CFDI:</span> G03 - Gastos en general</div>
              <div class="cfdi-row"><span class="cfdi-label">C.P.:</span> 20000</div>
           </div>
           <div class="cfdi-box">
              <h4>DATOS GENERALES</h4>
              <div class="cfdi-row"><span class="cfdi-label">Moneda:</span> MXN - Peso Mexicano</div>
              <div class="cfdi-row"><span class="cfdi-label">Forma de Pago:</span> 04 - Tarjeta de cr√©dito</div>
              <div class="cfdi-row"><span class="cfdi-label">M√©todo de Pago:</span> PUE - Pago en una sola exhibici√≥n</div>
           </div>
        </div>

        <table class="cfdi-table">
           <thead>
              <tr>
                 <th>Clave Prod/Serv</th>
                 <th>No. Identificaci√≥n</th>
                 <th>Cant</th>
                 <th>Clave Unidad</th>
                 <th>Descripci√≥n</th>
                 <th>Valor Unitario</th>
                 <th>Importe</th>
              </tr>
           </thead>
           <tbody>
              <tr>
                 <td>50181900</td>
                 <td>GEL-001</td>
                 <td>2</td>
                 <td>H87</td>
                 <td>
                    Gelatina de frutas Artesanal
                    <div style="font-size:9px; color:#666; margin-top:2px;">Impuesto: 002 IVA Base: $23.98 Tasa: 0.160000 Importe: $3.84</div>
                 </td>
                 <td>$11.99</td>
                 <td>$23.98</td>
              </tr>
           </tbody>
        </table>

        <div class="cfdi-footer-grid">
           <div>
              <div class="cfdi-row" style="font-size:11px; margin-bottom:15px;">
                 <strong>Importe con letra:</strong> VEINTISIETE PESOS 82/100 M.N.
              </div>
           </div>
           <div class="text-right">
              <div class="cfdi-row"><span class="cfdi-label">Subtotal:</span> $23.98</div>
              <div class="cfdi-row"><span class="cfdi-label">IVA (16%):</span> $3.84</div>
              <div class="cfdi-row" style="font-size:1.2rem; border-top:2px solid #333; padding-top:5px; margin-top:5px;">
                 <span class="cfdi-label">TOTAL:</span> $27.82
              </div>
           </div>
        </div>

        <div style="margin-top:30px; border-top:1px solid #ccc; padding-top:20px; display:flex; gap:20px;">
           <div class="qr-box">
              <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://verificacfdi.facturaelectronica.sat.gob.mx/" class="qr-img" alt="QR SAT">
           </div>
           <div class="cfdi-seals" style="flex:1">
              <div class="seal-block">
                 <span class="seal-label">Sello Digital del CFDI:</span>
                 vK8s9f+2L0m1N3j4K5h6G7f8D9s0A1q2W3e4R5t6Y7u8I9o0P1a2S3d4F5g6H7j8K9l0√ëzXcVbNmQwErTyUiOpAsDfGhJkL√±ZxCvBnMqWeRtYuIoPaSdFgHjKl√ëzXcVbNm==
              </div>
              <div class="seal-block">
                 <span class="seal-label">Sello del SAT:</span>
                 MnBvCxZlLkJhGfDsApOiUyTrEwQ1q2W3e4R5t6Y7u8I9o0P1lKmNjBhVgCfXdZsAwQrEtRyTuYiUoIpOaPsSdDfFgGhHjJkKlL√±√ëzZxXcCvVbBnNmM==
              </div>
              <div class="seal-block">
                 <span class="seal-label">Cadena Original del complemento de certificaci√≥n digital del SAT:</span>
                 ||1.1|A1B2C3D4-E5F6-7890-ABCD-1234567890EF|2025-11-04T22:10:00|SAT970701NN3|vK8s9f+2L0m1N3j4K5h6G7f8D9s0A1q2W3e4R5t6Y7u8I9o0P1a2S3d4F5g6H7j8K9l0√ëzXcVbNmQwErTyUiOpAsDfGhJkL√±ZxCvBnMqWeRtYuIoPaSdFgHjKl√ëzXcVbNm==|00001000000509876543||
              </div>
           </div>
        </div>

        <div style="margin-top:30px; text-align:center; display:flex; justify-content:center; gap:15px; position:relative; z-index:2;">
           <button class="btn btn-primary" onclick="window.print()">üñ® Imprimir / Guardar PDF</button>
            <button class="btn btn-primary" onclick="window.print()">‚úâÔ∏è Enviar al correo</button>
           <button class="btn btn-ghost" onclick="closeInvoice()">Cerrar</button>
        </div>
     </div>
  </div>

  <script>
     function showNotification(title, message, icon = 'üéâ') {
        const modal = document.getElementById('notificationModal');
        document.getElementById('notifTitle').innerText = title;
        document.getElementById('notifMsg').innerText = message;
        document.getElementById('notifIcon').innerText = icon;
        modal.style.display = 'flex';
     }

     function showDonateSuccess(amount) {
        showNotification(
           '¬°Donaci√≥n Exitosa!', 
           `Has donado $${amount} a Ni√±os del Futuro A.C.\n\nHemos enviado un cup√≥n de descuento a tu correo como agradecimiento.`,
           '‚ù§Ô∏è'
        );
     }

     function closeNotification() {
        document.getElementById('notificationModal').style.display = 'none';
     }

     function openInvoice() {
        document.getElementById('invoiceModal').style.display = 'flex';
        document.body.style.overflow = 'hidden';
     }

     function closeInvoice() {
        document.getElementById('invoiceModal').style.display = 'none';
        document.body.style.overflow = 'auto';
     }

     window.onclick = function(event) {
        const notif = document.getElementById('notificationModal');
        const invoice = document.getElementById('invoiceModal');
        if (event.target == notif) {
           closeNotification();
        }
        if (event.target == invoice) {
           closeInvoice();
        }
     }
  </script>

  <style>
     @media print {
        body * { visibility: hidden; }
        .invoice-paper, .invoice-paper * { visibility: visible; }
        .invoice-overlay { position: absolute; left: 0; top: 0; background: white; display: block !important; overflow: visible;}
        .invoice-paper { box-shadow: none; margin: 0; padding: 0; width: 100%; max-width: none; }
        .btn { display: none; }
     }
  </style>
            <!-- INICIO: PIE DE P√ÅGINA LEGAL Y CR√âDITOS -->
  <footer class="legal-footer">
    <p>
      <a href="legales.html#terminos">T√©rminos y Condiciones</a> |
      <a href="legales.html#privacidad">Aviso de Privacidad</a> |
      <a href="legales.html#devoluciones">Pol√≠ticas de Devoluci√≥n</a>
    </p>
    <p class="credits">
      Cr√©ditos de imagen: Todas las fotograf√≠as utilizadas en este sitio (incluyendo el fondo) fueron obtenidas de <a href="https://pixabay.com" target="_blank">Pixabay</a> bajo licencia de uso libre.
    </p>
    <p>¬© 2025 La Casa del Pastel. Todos los derechos reservados.</p>
  </footer>
  <!-- FIN: PIE DE P√ÅGINA -->

</body>
</html>